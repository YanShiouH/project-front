import{_ as S,L as k,ac as y,M as P,ad as B,P as C,Q as L,S as I,T as s,c as a,a9 as q,X as o,ae as A,af as m,ab as b,K as F,a2 as u,ag as M,ah as N}from"./index-3919ad30.js";import{u as T,a as p}from"./vee-validate.esm-07a8a422.js";import{c as U,a as _,V as R}from"./index.esm-4b3af0e7.js";import{V as $}from"./VContainer-b90d38bd.js";import{V as i,a as D}from"./VRow-33110aff.js";import"./_commonjsHelpers-39b5b250.js";const K=t=>(M("data-v-0bb32273"),t=t(),N(),t),Q=K(()=>b("h1",{class:"text-center"},"Login",-1)),X={class:"text-center"},j={__name:"LoginView",setup(t){const d=k(),h=y(),f=P(),g=U({account:_().required("Account is required").min(4,"Account should have at least 4 characters").max(20,"Account should not exceed 20 characters"),password:_().required("Password is required").min(4,"Password should have at least 4 characters").max(20,"Password should not exceed 20 characters")}),{handleSubmit:V,isSubmitting:w}=T({validationSchema:g}),r=p("account"),l=p("password"),v=V(async c=>{try{const{data:e}=await B.post("/users/login",{account:c.account,password:c.password});f.login({token:e.result.token,account:e.result.account,email:e.result.email,profile:e.result.profile,role:e.result.role}),d({text:"Login successful",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),h.push("/")}catch(e){d({text:e.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(c,e)=>{const x=C("router-link");return L(),I($,null,{default:s(()=>[a(D,{class:"max-width-512"},{default:s(()=>[a(i,{cols:"12"},{default:s(()=>[Q]),_:1}),a(q),a(i,{cols:"12"},{default:s(()=>[a(R,{disabled:o(w),onSubmit:A(o(v),["prevent"])},{default:s(()=>[a(m,{modelValue:o(r).value.value,"onUpdate:modelValue":e[0]||(e[0]=n=>o(r).value.value=n),"error-messages":o(r).errorMessage.value,label:"Account",counter:"",maxlength:"20"},null,8,["modelValue","error-messages"]),a(m,{modelValue:o(l).value.value,"onUpdate:modelValue":e[1]||(e[1]=n=>o(l).value.value=n),"error-messages":o(l).errorMessage.value,label:"Password",counter:"",maxlength:"20",type:"password"},null,8,["modelValue","error-messages"]),b("div",X,[a(F,{type:"submit",color:"primary"},{default:s(()=>[u("Log In")]),_:1})])]),_:1},8,["disabled","onSubmit"])]),_:1}),a(i,{cols:"12",class:"text-center"},{default:s(()=>[u(" Need a Taealam account? "),a(x,{to:"/register",class:"register-link"},{default:s(()=>[u(" Sign Up")]),_:1})]),_:1})]),_:1})]),_:1})}}},W=S(j,[["__scopeId","data-v-0bb32273"]]);export{W as default};
