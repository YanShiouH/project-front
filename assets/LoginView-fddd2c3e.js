import{_ as S,T as k,ar as y,U as B,as as C,Y as P,Z as q,a0 as I,a1 as s,c as a,af as L,a3 as o,at as U,au as m,an as b,K as A,a8 as u,ap as F,aq as N}from"./index-2464dbc7.js";import{c as T,a as p,u as M,d as _}from"./index.esm-2f23a872.js";import{V as R}from"./VContainer-74dc93a4.js";import{V as i,a as $}from"./VRow-95f717ca.js";import{V as D}from"./VForm-ea6f9526.js";import"./_commonjsHelpers-725317a4.js";const K=t=>(F("data-v-0bb32273"),t=t(),N(),t),Y=K(()=>b("h1",{class:"text-center"},"Login",-1)),Z={class:"text-center"},j={__name:"LoginView",setup(t){const d=k(),f=y(),h=B(),g=T({account:p().required("Account is required").min(4,"Account should have at least 4 characters").max(20,"Account should not exceed 20 characters"),password:p().required("Password is required").min(4,"Password should have at least 4 characters").max(20,"Password should not exceed 20 characters")}),{handleSubmit:V,isSubmitting:w}=M({validationSchema:g}),r=_("account"),l=_("password"),v=V(async c=>{try{const{data:e}=await C.post("/users/login",{account:c.account,password:c.password});h.login({token:e.result.token,account:e.result.account,email:e.result.email,profile:e.result.profile,role:e.result.role}),d({text:"Login successful",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),f.push("/")}catch(e){d({text:e.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(c,e)=>{const x=P("router-link");return q(),I(R,null,{default:s(()=>[a($,{class:"max-width-512"},{default:s(()=>[a(i,{cols:"12"},{default:s(()=>[Y]),_:1}),a(L),a(i,{cols:"12"},{default:s(()=>[a(D,{disabled:o(w),onSubmit:U(o(v),["prevent"])},{default:s(()=>[a(m,{modelValue:o(r).value.value,"onUpdate:modelValue":e[0]||(e[0]=n=>o(r).value.value=n),"error-messages":o(r).errorMessage.value,label:"Account",counter:"",maxlength:"20"},null,8,["modelValue","error-messages"]),a(m,{modelValue:o(l).value.value,"onUpdate:modelValue":e[1]||(e[1]=n=>o(l).value.value=n),"error-messages":o(l).errorMessage.value,label:"Password",counter:"",maxlength:"20",type:"password"},null,8,["modelValue","error-messages"]),b("div",Z,[a(A,{type:"submit",color:"primary"},{default:s(()=>[u("Log In")]),_:1})])]),_:1},8,["disabled","onSubmit"])]),_:1}),a(i,{cols:"12",class:"text-center"},{default:s(()=>[u(" Need a Taealam account? "),a(x,{to:"/register",class:"register-link"},{default:s(()=>[u(" Sign Up")]),_:1})]),_:1})]),_:1})]),_:1})}}},Q=S(j,[["__scopeId","data-v-0bb32273"]]);export{Q as default};
