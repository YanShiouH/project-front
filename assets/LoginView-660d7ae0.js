import{_ as S,L as k,aq as y,M as P,ar as q,P as B,Q as C,S as I,T as o,c as a,a9 as L,X as s,as as A,at as m,ai as g,K as F,a2 as u,ao as M,ap as N}from"./index-efecfaf4.js";import{c as T,a as p,u as U,d as _,V as R}from"./index.esm-2b1a04c0.js";import{V as $}from"./VContainer-09a94981.js";import{a as d,V as D}from"./VRow-c8d0b288.js";import"./_commonjsHelpers-725317a4.js";const K=t=>(M("data-v-b82ac188"),t=t(),N(),t),Q=K(()=>g("h1",{class:"text-center"},"Login",-1)),X={class:"text-center"},j={__name:"LoginView",setup(t){const h=k(),V=y(),f=P(),v=T({account:p().required("Account is required").min(4,"Account should have at least 4 characters").max(20,"Account should not exceed 20 characters"),password:p().required("Password is required").min(4,"Password should have at least 4 characters").max(20,"Password should not exceed 20 characters")}),{handleSubmit:w,isSubmitting:i}=U({validationSchema:v}),r=_("account"),l=_("password"),b=w(async c=>{try{const{data:e}=await q.post("/users/login",{account:c.account,password:c.password});f.login({token:e.result.token,account:e.result.account,email:e.result.email,profile:e.result.profile,role:e.result.role,image:e.result.image}),V.push("/")}catch(e){h({text:e.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(c,e)=>{const x=B("router-link");return C(),I($,null,{default:o(()=>[a(D,{class:"max-width-512"},{default:o(()=>[a(d,{cols:"12"},{default:o(()=>[Q]),_:1}),a(L),a(d,{cols:"12"},{default:o(()=>[a(R,{disabled:s(i),onSubmit:A(s(b),["prevent"])},{default:o(()=>[a(m,{modelValue:s(r).value.value,"onUpdate:modelValue":e[0]||(e[0]=n=>s(r).value.value=n),"error-messages":s(r).errorMessage.value,label:"Account",counter:"",maxlength:"20"},null,8,["modelValue","error-messages"]),a(m,{modelValue:s(l).value.value,"onUpdate:modelValue":e[1]||(e[1]=n=>s(l).value.value=n),"error-messages":s(l).errorMessage.value,label:"Password",counter:"",maxlength:"20",type:"password"},null,8,["modelValue","error-messages"]),g("div",X,[a(F,{type:"submit",color:"primary",loading:s(i)},{default:o(()=>[u("Log In")]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1}),a(d,{cols:"12",class:"text-center"},{default:o(()=>[u(" Need a Taealam account? "),a(x,{to:"/register",class:"register-link"},{default:o(()=>[u(" Sign Up")]),_:1})]),_:1})]),_:1})]),_:1})}}},O=S(j,[["__scopeId","data-v-b82ac188"]]);export{O as default};
